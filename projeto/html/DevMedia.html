<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="../css/style.css">
	<title>DevMedia | Plataforma para Programadores</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
	<!-- HEADER -->
	<header id="header1">
		<img src="../devmedia_logo.png" alt="" class="logo">
		<div class=text_header>
			<span>Tecnologias</span>
			<span>Contrate um Programador</span>
			
		</div>
		<input type='button' class="login" value='ENTRAR' onClick="show_login('dropdownLogin')"> 
				<div id = 'drop' class="dropdownLogin">
					<label>Usuário</label>
					<input class = "email" type="login"/>
					<label>Senha</label>
					<input class = "pass" type="password"/>
					<label id="validate" style="color: red; display: none;" >Usuário e/ou Senha invalido.</label>
					<button class = "btn_ok">L O G I N</button>
					<button id = "close" style="background-color: red;" onclick="close_login()"><b>X</b></button>
				</div> 
			</input>
		</button>
	</header>
	<!-- F I M   HEADER -->
	<!-- MAIN -->
	<main>
		<div class="div-dados" id="main-dados">
			<div class="div1">
				<h1>Nossa missão é fazer de você um</h1>
				<h1 class="programador">Programador</h1>
			</div>

			<div class="contant2">
				<div class="div2">
					<p>A única plataforma para programadores que oferece uma experiência leve e gamificada de
						aprendizado.<b>Conheça agora</b></p>
				</div>
				<div class="div3">
					<button class="btn_cria_conta">Crie uma conta grátis</button>
				</div>
			</div>
		</div>
		<img id="img-div" class="div-img" src="../img1.jpeg">
	</main>
<!-- J S  -->
<script>
	function show_login() {
		document.getElementById('drop').style.display = 'block';
		document.getElementById('validate').style.display='none'
		}
	function close_login(){
		document.getElementById('drop').style.display = 'none';
	}
/*{
    "email": "eve.holt@reqres.in",
    "password": "cityslicka"
}*/
	document.querySelector('.btn_ok').addEventListener('click', async () => {
		let token = localStorage.getItem('token');
		try {
			var email = document.querySelector('.email').value
			var pass = document.querySelector('.pass').value
			
			let json = await axios.post('https://reqres.in/api/login', {
				email:  email,
				password: pass
			});
			
				if(json.data.token) {
				token = json.data.token;
				localStorage.setItem('token',token);
				localStorage.setItem('active',json.status);
				document.getElementById('drop').style.display='none'
				}
			
			console.log(email,pass)	
			console.log(json);
			console.log(json.data.token+"na api response");
			console.log(localStorage.token+"no local storage;");
			console.log(localStorage.active+" status")
		}
		catch(e) {
			var email = document.querySelector('.email').value = "";
			var pass = document.querySelector('.pass').value = "";
			document.getElementById('validate').style.display='block';
			localStorage.active=400;
		}	
		if(localStorage.active == 200){
			try{
					document.getElementById('header1').style.display='none';
					document.getElementById('main-dados').style.display='none';
					document.getElementById('img-div').style.display='none'
			}
			catch(e){
				console.log("erro aqui")
			}	
		}
		else console.log("difere");
	});	
		
</script>
</body>
</html>